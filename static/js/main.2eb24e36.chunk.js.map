{"version":3,"sources":["storage.js","config.js","App.js","reportWebVitals.js","index.js"],"names":["useLocalStorageWitTTL","key","initialValue","useState","item","window","localStorage","getItem","data","JSON","parse","now","Date","getTime","expiry","removeItem","value","error","console","log","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","apps","length","app","initializeApp","App","setData","ticks","setTicks","updateData","useCallback","firestore","collection","orderBy","limit","get","then","snapshot","prices","docs","map","doc","id","reverse","labels","price","date","seconds","toLocaleString","timeZone","slice","uni_swap","erc_20","erc20_transfer","uni_liq","catch","useEffect","chart","datasets","label","backgroundColor","borderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBorderWidth","pointRadius","pointHitRadius","className","Math","round","toFixed","onClick","href","rel","target","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2eb24e36.chunk.js","sourcesContent":["import { useState } from 'react';\n\n// 16min\nconst TTL = 1000000;\n\nexport const useLocalStorageWitTTL = (key, initialValue) => {\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      const data = JSON.parse(item);\n\t    const now = new Date();\n      if (data && now.getTime() > data.expiry) {\n        // If the item is expired, delete the item from storage\n        // and return null\n        localStorage.removeItem(key)\n        return null\n      }\n      return data ? data.value : initialValue;\n    } catch (error) {\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  const setValue = value => {\n    try {\n      const now = new Date();\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      const item = {\n        value: valueToStore,\n        expiry: now.getTime() + TTL,\n      }\n      setStoredValue(valueToStore);\n      window.localStorage.setItem(key, JSON.stringify(item));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorageWitTTL;","const firebaseConfig = {\n    apiKey: \"AIzaSyCYa490KJ_GJqsykw4668Z-CiZ2wfJ1tZ4\",\n    authDomain: \"gwei-price-watcher.firebaseapp.com\",\n    projectId: \"gwei-price-watcher\",\n    storageBucket: \"gwei-price-watcher.appspot.com\",\n    messagingSenderId: \"859407948329\",\n    appId: \"1:859407948329:web:8fa4d1f6db64e32a7c5a38\",\n    measurementId: \"G-RKYDJQ62M6\"\n  };\n\n  export default firebaseConfig;","import './App.css';\nimport useLocalStorageWitTTL from './storage';\nimport { useEffect, useCallback, useState } from 'react';\n\nimport { Line } from 'react-chartjs-2';\nimport firebase from 'firebase';\nimport firebaseConfig from './config';\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n} else {\n  firebase.app();\n}\n\nfunction App() {\n  const [data, setData] = useLocalStorageWitTTL('chart_prices', null);\n  const [ticks, setTicks] = useState(36);\n\n  const updateData = useCallback((ticks) => {\n    if (data === null) {\n      console.log('reloading data')\n      const pricesRef = firebase\n                        .firestore()\n                        .collection('gwei_prices')\n                        .orderBy('date', 'desc')\n                        .limit(ticks);\n      pricesRef\n        .get()\n        .then((snapshot) => {\n          const all_prices = snapshot.docs.map((doc) => ({\n            id: doc.id,\n            ...doc.data(),\n          }));\n          const prices = all_prices.reverse();\n          const labels = prices.map(price => (new Date(price.date.seconds * 1000).toLocaleString('en-GB', { timeZone: 'UTC' }).slice(-8)));\n          const uni_swap = prices.map(price => (price.uni_swap));\n          const erc_20 = prices.map(price => (price.erc20_transfer));\n          const uni_liq = prices.map(price => (price.uni_liq));\n          setData({\n            labels,\n            uni_swap,\n            erc_20,\n            uni_liq\n          });\n        })\n        .catch(function(error) {console.log(error)});\n    }\n  }, [data, setData]);\n\n  useEffect(() => {\n    updateData(ticks);\n  }, [updateData, ticks]);\n\n  const chart = {\n    labels: data ? data.labels : [],\n    datasets: [\n      {\n        label: 'UNI SWAP',\n        backgroundColor: 'rgb(20 144 41 / 0.3)',\n        borderColor: 'rgb(20 144 41 / 1)',\n        pointBackgroundColor: '#fff',\n        pointBorderWidth: 2,\n        pointHoverRadius: 5,\n        pointHoverBorderWidth: 2,\n        pointRadius: 4,\n        pointHitRadius: 10,\n        data: data ? data.uni_swap : []\n      },\n      {\n        label: 'ERC 20',\n        backgroundColor: 'rgb(27 63 136 / 0.3)',\n        borderColor: 'rgb(27 63 136 / 1)',\n        pointBackgroundColor: '#fff',\n        pointBorderWidth: 2,\n        pointHoverRadius: 5,\n        pointHoverBorderWidth: 2,\n        pointRadius: 4,\n        pointHitRadius: 10,\n        data: data ? data.erc_20 : []\n      },\n      {\n        label: 'UNI LIQ',\n        backgroundColor: 'rgb(142 20 144 / .3)',\n        borderColor: 'rgb(142 20 144 / 1)',\n        pointBackgroundColor: '#fff',\n        pointBorderWidth: 2,\n        pointHoverRadius: 5,\n        pointHoverBorderWidth: 2,\n        pointRadius: 4,\n        pointHitRadius: 10,\n        data: data ? data.uni_liq : []\n      },\n    ]\n  };\n\n  const handleTicks = () => {\n    setData(null);\n    setTicks(ticks === 36 ? 72 : 36);\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h2>Gwei Prices</h2>\n        <div className={'chart'}>\n          <Line data={chart} />\n        </div>\n        <span>\n          ERC20 TRANSFER: <b>${data && (Math.round(data.erc_20[data.erc_20.length - 1] * 100) / 100).toFixed(2)}</b> |\n          UNISWAP SWAP: <b>${data && (Math.round(data.uni_swap[data.uni_swap.length - 1] * 100) / 100).toFixed(2)}</b> |\n          UNISWAP LIQ POOL: <b>${data && (Math.round(data.uni_liq[data.uni_liq.length - 1] * 100) / 100).toFixed(2)}</b>\n        </span>\n        <p><button onClick={handleTicks}>toggle {ticks} ticks </button></p>\n      </header>\n      <footer>\n        <a href='https://etherscan.io/apis' rel=\"noreferrer\" target='_blank'>Powered by Etherscan.io APIs</a>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}