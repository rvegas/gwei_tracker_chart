{"version":3,"sources":["storage.js","config.js","App.js","reportWebVitals.js","index.js"],"names":["useLocalStorageWitTTL","key","initialValue","useState","item","window","localStorage","getItem","data","JSON","parse","Date","getTime","expiry","removeItem","value","error","console","log","storedValue","setStoredValue","now","valueToStore","Function","setItem","stringify","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","apps","length","app","initializeApp","pricesRef","firestore","collection","orderBy","limit","App","setData","updateData","useCallback","get","then","snapshot","prices","docs","map","doc","id","reverse","labels","price","date","seconds","toLocaleString","timeZone","slice","uni_swap","erc_20","erc20_transfer","uni_liq","useEffect","chart","datasets","label","backgroundColor","borderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBorderWidth","pointRadius","pointHitRadius","className","Math","round","toFixed","href","rel","target","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.17162c83.chunk.js","sourcesContent":["import { useState } from 'react';\r\n\r\n// 5min\r\nconst TTL = 300000;\r\n\r\nexport const useLocalStorageWitTTL = (key, initialValue) => {\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      const item = window.localStorage.getItem(key);\r\n      const data = JSON.parse(item);\r\n\t    const now = new Date();\r\n      if (now.getTime() > data.expiry) {\r\n        // If the item is expired, delete the item from storage\r\n        // and return null\r\n        localStorage.removeItem(key)\r\n        return null\r\n      }\r\n      return data ? data.value : initialValue;\r\n    } catch (error) {\r\n      console.log(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n\r\n  const setValue = value => {\r\n    try {\r\n      const now = new Date();\r\n      const valueToStore =\r\n        value instanceof Function ? value(storedValue) : value;\r\n      const item = {\r\n        value: valueToStore,\r\n        expiry: now.getTime() + TTL,\r\n      }\r\n      setStoredValue(valueToStore);\r\n      window.localStorage.setItem(key, JSON.stringify(item));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return [storedValue, setValue];\r\n}\r\n\r\nexport default useLocalStorageWitTTL;","const firebaseConfig = {\r\n    apiKey: \"AIzaSyCYa490KJ_GJqsykw4668Z-CiZ2wfJ1tZ4\",\r\n    authDomain: \"gwei-price-watcher.firebaseapp.com\",\r\n    projectId: \"gwei-price-watcher\",\r\n    storageBucket: \"gwei-price-watcher.appspot.com\",\r\n    messagingSenderId: \"859407948329\",\r\n    appId: \"1:859407948329:web:8fa4d1f6db64e32a7c5a38\",\r\n    measurementId: \"G-RKYDJQ62M6\"\r\n  };\r\n\r\n  export default firebaseConfig;","import './App.css';\nimport useLocalStorageWitTTL from './storage';\nimport { useEffect, useCallback } from 'react';\n\nimport { Line } from 'react-chartjs-2';\nimport firebase from 'firebase';\nimport firebaseConfig from './config';\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n} else {\n  firebase.app();\n}\n\nconst pricesRef = firebase.firestore().collection('gwei_prices').orderBy('date', 'desc').limit(30);\n\nfunction App() {\n  const [data, setData] = useLocalStorageWitTTL('chart_prices', null);\n\n  const updateData = useCallback(() => {\n    if (data === null) {\n      pricesRef\n        .get()\n        .then((snapshot) => {\n          const all_prices = snapshot.docs.map((doc) => ({\n            id: doc.id,\n            ...doc.data(),\n          }));\n          const prices = all_prices.reverse();\n          const labels = prices.map(price => (new Date(price.date.seconds * 1000).toLocaleString('en-GB', { timeZone: 'UTC' }).slice(-8)));\n          const uni_swap = prices.map(price => (price.uni_swap));\n          const erc_20 = prices.map(price => (price.erc20_transfer));\n          const uni_liq = prices.map(price => (price.uni_liq));\n          setData({\n            labels,\n            uni_swap,\n            erc_20,\n            uni_liq\n          });\n        });\n    }\n  }, [data, setData]);\n\n  useEffect(() => {\n    updateData();\n  }, [updateData]);\n\n  const chart = {\n    labels: data ? data.labels : [],\n    datasets: [\n      {\n        label: 'UNI SWAP',\n        backgroundColor: 'rgb(20 144 41 / 0.3)',\n        borderColor: 'rgb(20 144 41 / 1)',\n        pointBackgroundColor: '#fff',\n        pointBorderWidth: 2,\n        pointHoverRadius: 5,\n        pointHoverBorderWidth: 2,\n        pointRadius: 4,\n        pointHitRadius: 10,\n        data: data ? data.uni_swap : []\n      },\n      {\n        label: 'ERC 20',\n        backgroundColor: 'rgb(27 63 136 / 0.3)',\n        borderColor: 'rgb(27 63 136 / 1)',\n        pointBackgroundColor: '#fff',\n        pointBorderWidth: 2,\n        pointHoverRadius: 5,\n        pointHoverBorderWidth: 2,\n        pointRadius: 4,\n        pointHitRadius: 10,\n        data: data ? data.erc_20 : []\n      },\n      {\n        label: 'UNI LIQ',\n        backgroundColor: 'rgb(142 20 144 / .3)',\n        borderColor: 'rgb(142 20 144 / 1)',\n        pointBackgroundColor: '#fff',\n        pointBorderWidth: 2,\n        pointHoverRadius: 5,\n        pointHoverBorderWidth: 2,\n        pointRadius: 4,\n        pointHitRadius: 10,\n        data: data ? data.uni_liq : []\n      },\n    ]\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h2>Gwei Prices</h2>\n        <div className={'chart'}>\n          <Line data={chart} />\n        </div>\n        <span>\n          ERC20 TRANSFER: <b>${data && (Math.round(data.erc_20[data.erc_20.length - 1] * 100) / 100).toFixed(2)}</b> |\n          UNISWAP SWAP: <b>${data && (Math.round(data.uni_swap[data.uni_swap.length - 1] * 100) / 100).toFixed(2)}</b> |\n          UNISWAP LIQ POOL: <b>${data && (Math.round(data.uni_liq[data.uni_liq.length - 1] * 100) / 100).toFixed(2)}</b>\n        </span>\n      </header>\n      <footer>\n        <a href='https://etherscan.io/apis' rel=\"noreferrer\" target='_blank'>Powered by Etherscan.io APIs</a>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}